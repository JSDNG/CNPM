<!DOCTYPE html>
<html lang="en">

<head th:replace="admin/layout :: head"></head>

<head>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
   <div class="container-fluid">
      <div class="row g-0">
         <div th:replace="admin/layout :: navleft"></div>
         <div class="col-12 col-sm-12 col-md-9 col-lg-9 col-xxl-10 content-column">
            <div class="container">
               <nav th:replace="admin/layout :: navtop"></nav>
               <!-- CODE HERE -->
               <th:block th:if="${cartForm == null || cartForm.cartItems == null || cartForm.cartItems.empty}">
                  <h2>There is no items in Cart</h2>
                  <a th:href="@{/admin}">Show Product List</a>
               </th:block>

               <th:block th:if="${cartForm != null && cartForm.cartItems != null && !cartForm.cartItems.empty}">
                  <form method="POST" th:object="${cartForm}" th:action="@{/shoppingCart}">

                     <div class="product-preview-container" th:each="cartItem, varStatus : ${cartForm.cartItems}">
                        <ul>
                           <li><img class="product-image"
                                 th:src="@{|/productImage?code=${cartItem.product.productID}|}" />
                           </li>
                           <li>Code: <span th:utext="${cartItem.product.productID}"></span>
                              <input type="hidden" th:name="|cartItems[${varStatus.index}].product.productID|"
                                 th:value="${cartItem.product.productID}" />
                           </li>
                           <li>Name: <span th:utext="${cartItem.product.name}"></span></li>
                           <li>Price:
                              <span class="price"
                                 th:utext="${#numbers.formatDecimal(cartItem.product.price,3,2,'COMMA')}">
                              </span>
                           </li>
                           <li>Quantity:
                              <input th:name="|cartItems[${varStatus.index}].quantity|"
                                 th:value="${cartItem.quantity}" />
                           </li>
                           <li>Subtotal:
                              <span class="subtotal">
                              </span>
                           </li>
                           <li>
                              <a th:href="@{|/admin/cartRemoveProduct?code=${cartItem.product.productID}|}">
                                 Delete
                              </a>
                           </li>
                        </ul>
                     </div>

                     <div style="clear: both"></div>
                     <input class="button-update-sc" type="submit" value="Update Quantity" />
                  </form>
               </th:block>
            </div>
         </div>
      </div>
   </div>
   <script>
      var form = document.getElementById("search-form");
      form.remove();

      document.getElementById("nav-top").style.justifyContent = "flex-end";
   </script>
   <script th:src="@{/admin/js/scripts.js}"></script>
</body>

</html>